{% load common_tags %}

<table class="table table-sm">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Project</th>
      <th scope="col">PI Name</th>
      <th scope="col">PI Email</th>
      <th scope="col">Requested Amount (TB)</th>
      <th scope="col">Status</th>
    </tr>
  </thead>
  <tbody>
  {% for request_obj in queryset %}
    <tr>
      <td>
        <a href="{% url 'storage-request-detail' request_obj.id %}">
          {{ request_obj.id }}
        </a>
      </td>
      <td>{{ request_obj.project.name }}</td>
      <td>{{ request_obj.pi.first_name }} {{ request_obj.pi.last_name }}</td>
      <td>{{ request_obj.pi.email }}</td>
      <td>{{ request_obj.requested_amount_tb }} TB</td>
      {% with request_status=request_obj.status.name %}
      <td>
        {% include 'cluster_storage/approval/storage_request_status_badge.html' with status=request_status %}
      </td>
      {% endwith %}
    </tr>
  {% endfor %}
  </tbody>
</table>
